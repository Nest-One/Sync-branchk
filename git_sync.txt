for branch in $(git for-each-ref --format='%(refname:short)' refs/heads/); do {
  echo branch="${branch}"
  git checkout "${branch}"
  git pull origin master
  
  if output="$(git status --porcelain)" && [ -z "$output" ]; then
    git push origin "${branch}"
    git checkout master
else 
    echo "Working directory has UNCOMMITTED CHANGES- ${git status --porcelain -suno|wc -l}"
    git reset --merge
    git add .
    git commit -m "Merge with master"
    git push origin "${branch}"
    git checkout master
fi

}
done